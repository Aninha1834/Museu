#{extends 'main-administrador.html' /}
#{set title:'Administração' /}

#{if flash.success}
${flash.success}
#{/if}
#{elseif flash.error}
${flash.error}
#{/elseif}
<meta charset="utf-8">

<main class="h-full pb-16 overflow-y-auto">
	<form class="container px-6 mx-auto grid" action="@{Objetos.salvar}" method="POST" enctype="multipart/form-data">
		<input type="hidden" name="objeto.id" value="${objeto?.id}">
    	<h2
        	class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"
        >
        	Cadastro de objetos
        </h2>
			
       	<div
        	class="px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"
        >
        <div class="mt-4 text-sm">
        	<label class="block text-sm">
            	<span class="text-gray-700 dark:text-gray-400">Nome</span>
                	<input
                		name="objeto.nome" 
                		value="${objeto?.nome}"
                  		class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  		placeholder="Digite o nome do objeto"
                	/>
                	<span class="msg-erro">#{error 'objeto.nome' /}</span>
       		</label>
       	</div>
    
       	<div class="mt-4 text-sm">
	       	<label class="block mt-4 text-sm">
		   		<span class="text-gray-700 dark:text-gray-400">
					Categoria
		   		</span>
		
		   		<select name="objeto.categoria.id"
					class="block w-full mt-1 text-sm dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 form-select focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray"
				>	
					<option></option>
					#{list items:categorias, as: 'categoria'}
						
	        			<option value="${categoria.id}" #{if categoria.id == objeto?.categoria?.id} selected #{/if}>${categoria.nome}</option>
	        			 
	        		#{/list}
		   		</select>
		   		<span class="msg-erro">#{error 'objeto.categoria.id' /}</span>
	       </label>
       </div>
     
      

       	<div class="mt-4 text-sm">
        	<label class="block text-sm">
            	<span class="text-gray-700 dark:text-gray-400">Material</span>
                	<input
                		name="objeto.material" 
                		value="${objeto?.material}"
                  		class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  		placeholder="De que o objeto é feito?"
                	/>
                	<span class="msg-erro">#{error 'objeto.material' /}</span>
       		</label>
       	</div> 
       	<div class="mt-4 text-sm">
        	<label class="block text-sm">
            	<span class="text-gray-700 dark:text-gray-400">Altura</span>
                	<input
                		name="objeto.altura" 
                		value="${objeto?.altura}"
                  		class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  		placeholder="Altura em centímetros"
                	/>
       		</label>
       	</div>  
       	<div class="mt-4 text-sm">
        	<label class="block text-sm">
            	<span class="text-gray-700 dark:text-gray-400">Largura</span>
                	<input
                		name="objeto.largura" 
                		value="${objeto?.largura}"
                  		class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  		placeholder="Largura em centímetros"
                	/>
       		</label>
       	</div> 
       	<div class="mt-4 text-sm">
        	<label class="block text-sm">
            	<span class="text-gray-700 dark:text-gray-400">Data</span>
                	<input
                		name="objeto.data" 
                		class="date block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  		placeholder="dd/mm/aaaa"
                		value="${objeto?.data?.format('dd/MM/yyyy')}"
                  		class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
                  		placeholder="dd/mm/aaaa"
                  		
                	/>
                	<span class="msg-erro">#{error 'objeto.data' /}</span>
       		</label>
       	</div>
       	<div class="mt-4 text-sm">
        	<label class="block mt-4 text-sm">
                <span class="text-gray-700 dark:text-gray-400">História</span>
                <textarea
                	name="objeto.historia" 
                  	class="block w-full mt-1 text-sm dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 form-textarea focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray"
                  	rows="3"
                  	placeholder="Escreva a história do objeto aqui"
                >${objeto?.historia}</textarea>
           	</label>
           	<span class="msg-erro">#{error 'objeto.historia' /}</span>
       	</div>
       	
       	<div class="flex mt-6 text-sm">
        	<label class="flex items-center dark:text-gray-400">
            	<input
              		value="true"
                  	name="visivel"
                    type="checkbox"
                  	#{if objeto?.visivel == true}
                  		checked
                  	#{/if}
                    class="text-purple-600 form-checkbox focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray"
                  
               	/>
          		<span class="ml-2">
                    Permitir que este objeto seja visualizado pelo público
               	</span>
        	</label>
		</div>
              
       	<div class="mt-4 text-sm">
        	<label class="block text-sm">
            	<span class="text-gray-700 dark:text-gray-400">Foto</span>
                	<input
                		name="foto" 
                  		type="file"
                	/>
       		</label>
       	</div>
     
              	
       	<div class="mt-4 text-sm">
	        <input
	        	Style="cursor:pointer"
	        	type="submit"
	        	value="Cadastrar"
	          	class="px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple"
	        >
       	</div> 
       	
       	#{if objeto?.id}
       		#{list items:objeto.fotos, as:'f'}
      			<img src="/uploads/${f.nomeFoto}" style="width:200px">
      		#{/list}
       	#{/if}
	</form>
</main>

