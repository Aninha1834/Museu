#{extends 'main-administrador.html' /}
#{set title:'Administração' /}

#{if flash.success}
${flash.success}
#{/if}
#{elseif flash.error}
${flash.error}
#{/elseif}
<meta charset="utf-8">

<main class="h-full pb-16 overflow-y-auto">
	<form class="container px-6 mx-auto grid" action="@{Colecoes.salvar}" method="post">
		<input type="hidden" name="colecao.id" value="${colecao?.id}">
    	<h2
        	class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200"
        >
        	Cadastro de coleções
        </h2>
			
       	<div
        	class="px-4 py-3 mb-8 bg-white rounded-lg shadow-md dark:bg-gray-800"
        >
	        <div class="mt-4 text-sm">
	        	<label class="block text-sm">
	            	<span class="text-gray-700 dark:text-gray-400">Nome</span>
	                	<input
	                		name="colecao.nome" 
	                		value="${colecao?.nome}"
	                  		class="block w-full mt-1 text-sm dark:border-gray-600 dark:bg-gray-700 focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:text-gray-300 dark:focus:shadow-outline-gray form-input"
	                  		placeholder="Digite o nome da coleção"
	                	/>
	                	<span class="msg-erro">#{error 'colecao.nome' /}</span>
	       		</label>
	       	</div>
	       	
	       	#{if colecao?.id}
		       	<div class="mt-4 text-sm">
			       	<label class="block mt-4 text-sm">
				   		<span class="text-gray-700 dark:text-gray-400">
							Objetos
				   		</span>
				
				   		<select name="idObjeto"
							class="block w-full mt-1 text-sm dark:text-gray-300 dark:border-gray-600 dark:bg-gray-700 form-select focus:border-purple-400 focus:outline-none focus:shadow-outline-purple dark:focus:shadow-outline-gray"
						>	
							<option></option>
							#{list items:objetos, as: 'obj'}
								
								<option value="${obj.id}">${obj.nome}</option>
										        			 
			        		#{/list}
				   		</select>
			       </label>
	       		</div>
       		#{/if}
	       	
       	</div>
       
       	
       	<div class="mt-4 text-sm">
	        <input
	        	Style="cursor:pointer"
	        	type="submit"
	        	value="Cadastrar"
	          	class="px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple"
	        >
       	</div> 
	</form>
	
	#{if colecao?.id}
		#{list items:colecao.objetos, as: 'liObj'}
			<a href="@{Colecoes.removerObjeto(colecao.id, liObj.id)}"> Remover </a> ${liObj.nome} <br>			        			 
		#{/list}
	#{/if}
	
</main>